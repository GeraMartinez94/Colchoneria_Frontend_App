<!-- src/app/app.component.html -->

<!-- Main Header -->
<header class="main-header">
  <!-- Top header section (contact info) -->
   <div class="header-top">
    <div class="header-contact">
      <span><i class="fas fa-phone"></i> +54 3755 688810</span>
      <span><i class="fas fa-envelope"></i> infocolchoneria.com</span>
      <span><i class="fas fa-map-marker-alt"></i> Av. Juan Bautista Alberdi 950, Oberá - Misiones</span>
      <a href="https://wa.me/5493755688810" target="_blank" class="whatsapp-link">
        <i class="fab fa-whatsapp"></i> WhatsApp
      </a>
    </div>
  </div>

  <!-- Navbar Container (simplified for sidebar integration) -->
  <nav class="navbar">
    <div class="navbar-brand">
      <a routerLink="/">El Galpón Colchonería</a>
    </div>
    <!-- El botón de alternar (sidebar-toggler) se ha movido fuera de aquí y será fijo -->
  </nav>
</header>

<!-- Sidebar Toggle Button (Hamburger Icon) - Ahora es un elemento fijo -->
<button class="sidebar-toggler" (click)="toggleSidebar()" [class.active]="isSidebarOpen" aria-label="Toggle sidebar">
  <span class="icon-bar"></span>
  <span class="icon-bar"></span>
  <span class="icon-bar"></span>
</button>

<!-- Sidebar Component -->
<aside class="sidebar" [class.open]="isSidebarOpen">
  <div class="sidebar-header">
    <button class="close-sidebar-btn" (click)="closeSidebar()">
      <i class="fas fa-times"></i> <!-- Close icon -->
    </button>
    <div class="sidebar-brand">
      El Galpón
    </div>
  </div>

  <nav class="sidebar-nav">
    <ul>
      <li>
        <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" (click)="closeSidebar()">
          <i class="fas fa-home"></i> Inicio
        </a>
      </li>
      <li>
        <a routerLink="/productos" routerLinkActive="active" (click)="closeSidebar()">
          <i class="fas fa-box"></i> Productos
        </a>
      </li>

      <!-- Categories Dropdown within Sidebar -->
          <!-- Dropdown de Categorías -->
        <li class="dropdown-sidebar">
          <button class="dropbtn-sidebar" (click)="toggleCategoriesDropdown()">
            <i class="fas fa-th-large"></i> Categorías <i class="fas fa-chevron-down dropdown-icon" [ngClass]="{ 'rotate': isCategoriesDropdownOpen }"></i>
          </button>
          <div class="dropdown-content-sidebar" [ngClass]="{ 'open': isCategoriesDropdownOpen }">
            <a routerLink="/productos/colchones" routerLinkActive="active">Colchones</a>
            <a routerLink="/productos/sommiers" routerLinkActive="active">Sommiers</a>
            <a routerLink="/productos/almohadas" routerLinkActive="active">Almohadas</a>
            <a routerLink="/productos/blanqueria" routerLinkActive="active">Blanquería</a>
            <a routerLink="/productos/accesorios" routerLinkActive="active">Accesorios</a>
          </div>
        </li>


      <!-- Link to Upload Products (only for administrators) -->
      <li *ngIf="authService.isAdmin$ | async">
        <a routerLink="/upload-products" routerLinkActive="active" (click)="closeSidebar()">
          <i class="fas fa-upload"></i> Subir Productos
        </a>
      </li>

      <!-- Login/Logout Conditional Links -->
      <ng-container *ngIf="!(authService.isAuthenticated$ | async); else authenticatedLinks">
        <li>
          <a routerLink="/login" routerLinkActive="active" (click)="closeSidebar()">
            <i class="fas fa-sign-in-alt"></i> Iniciar Sesión
          </a>
        </li>
      </ng-container>

      <ng-template #authenticatedLinks>
        <li>
          <a routerLink="/perfil" routerLinkActive="active" (click)="closeSidebar()">
            <i class="fas fa-user-circle"></i> Mi Perfil
          </a>
        </li>
        <li class="user-info-and-logout">
          <span class="username-display">
            Hola,
            <ng-container *ngIf="authService.isAdmin$ | async">Admin </ng-container>
            {{ authService.username$ | async }}
          </span>
          <button (click)="onLogout()" class="logout-button">
            <i class="fas fa-sign-out-alt"></i> Cerrar Sesión
          </button>
        </li>
      </ng-template>
    </ul>
  </nav>
</aside>

<!-- Overlay for when sidebar is open -->
<div class="overlay" [class.active]="isSidebarOpen" (click)="closeSidebar()"></div>

<!-- Main content area -->
<main class="main-content">
  <router-outlet></router-outlet>
</main>

<!-- Main Footer -->
<footer class="main-footer">
  <div class="footer-content">
    <div class="footer-section about">
      <h3>Sobre Nosotros</h3>
      <p>Somos El Galpón Colchonería, tu mejor opción para el descanso. Ofrecemos productos de calidad superior para asegurar tu confort.</p>
    </div>
    <div class="footer-section contact">
      <h3>Contacto</h3>
      <div class="contact-info">
        <span><i class="fas fa-map-marker-alt"></i> Av. Juan Bautista Alberdi 950, Oberá - Misiones</span>
        <span><i class="fas fa-phone"></i> +54 3755 688810</span>
        <span><i class="fas fa-envelope"></i> infocolchoneria.com</span>
      </div>
    </div>
    <div class="footer-section links">
      <h3>Enlaces Rápidos</h3>
      <ul>
        <li><a routerLink="/productos">Productos</a></li>
        <li><a routerLink="/login">Login</a></li>
      </ul>
    </div>
    <div class="footer-section social">
      <h3>Síguenos</h3>
      <div class="social-links">
        <a href="https://facebook.com/elgalponcolchones" target="_blank"><i class="fab fa-facebook-f"></i></a>
        <a href="https://instagram.com/elgalponcolchones" target="_blank"><i class="fab fa-instagram"></i></a>
        <a href="https://twitter.com/elgalponcolchones" target="_blank"><i class="fab fa-twitter"></i></a>
      </div>
    </div>
  </div>
  <div class="footer-bottom">
    &copy; {{ currentYear }} El Galpón Colchonería. Todos los derechos reservados.
  </div>
</footer>
